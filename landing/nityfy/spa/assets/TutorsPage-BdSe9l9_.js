import{m as n,n as g,p as a,q as o,y as R,f as e,Q as b,C as ae,X as u,z as r,U as w,a8 as S,Y as x,v as d,D as h,S as le,F as oe,B as se,W as U,P as A,a7 as B,r as c,c as T}from"./index-BCoBQOFT.js";import{Q as ie,a as M,b as re,c as D}from"./QTabPanels-CJnekpGK.js";import{Q as ne}from"./QChip-B9sWOFsV.js";import{Q as j,a as p}from"./QTable-Dv_xctJK.js";import{Q as k}from"./QBadge-CD0MS9Rg.js";import{Q as $,a as E}from"./QItem-Wb4A_Ad7.js";import{Q as ue}from"./QList-TwHTGU55.js";import{Q as de}from"./QMenu-CRQWq3Fk.js";import{Q as z}from"./QSelect-DZMeRPTx.js";import{Q as me}from"./QPage-DNQfSVvF.js";import{C as _}from"./ClosePopup-DoFqAVUY.js";import{u as ce}from"./use-quasar-DuPF83ky.js";import{u as pe}from"./currency-FmnwYlLu.js";import{_ as fe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./QResizeObserver-CLJoVRmi.js";import"./touch-BjYP5sR0.js";import"./position-engine-BGz6yeZ8.js";import"./use-render-cache-DLxPkVnQ.js";import"./QLinearProgress-DcUDM4wH.js";import"./QItemLabel-djxoAbwS.js";import"./format-CoaQEihs.js";import"./index-D5GkNzM3.js";const ve={class:"row items-center justify-between q-mb-lg"},ge={key:0,class:"q-gutter-x-sm"},be={class:"row q-col-gutter-md q-mb-lg"},ye={class:"col-12 col-md-3"},we={class:"row items-center justify-between"},xe={class:"text-h4 text-weight-bold text-dark q-mt-xs"},he={class:"col-12 col-md-3"},_e={class:"row items-center justify-between"},Ce={class:"text-h4 text-weight-bold text-orange-9 q-mt-xs"},Pe={class:"col-12 col-md-3"},qe={class:"row items-center justify-between"},Ve={class:"text-h4 text-weight-bold text-green-9 q-mt-xs"},ke={class:"col-12 col-md-3"},Qe={class:"row items-center justify-between"},Ae={class:"text-h6 text-weight-bold text-dark q-mt-xs ellipsis"},Te={class:"row q-col-gutter-md"},Ne={class:"col-12"},Se={class:"row items-center"},Me={class:"text-weight-medium"},De={class:"row items-center no-wrap"},je={class:"text-weight-bold"},Ie={class:"text-caption text-grey-5"},Re={class:"q-gutter-xs"},Ue={class:"text-h6"},Be={class:"row q-col-gutter-sm"},$e={class:"col-6"},Ee={class:"col-6"},ze={class:"text-weight-bold text-primary"},Oe={__name:"TutorsPage",setup(Fe){const C=ce(),m=pe(),P=c("overview"),Q=c(!1),i=c({}),q=c(!1),O=[{name:"name",required:!0,label:"Tutor Name",align:"left",field:"name",sortable:!0},{name:"subjects",align:"left",label:"Subjects",field:"subjects"},{name:"phone",align:"left",label:"Contact",field:"phone"},{name:"commission",align:"center",label:"Commission",field:"commission",sortable:!0},{name:"status",align:"left",label:"Status",field:"status",sortable:!0},{name:"actions",align:"right",label:"",field:"actions"}],f=c([{id:1,name:"Mr. Sarath Mel",email:"sarath@examle.com",subjects:["Mathematics","Physics"],phone:"077-1112223",status:"Active",commission:60},{id:2,name:"Ms. Deepika Gunawardena",email:"deepika@example.com",subjects:["Chemistry"],phone:"071-3334445",status:"Active",commission:70},{id:3,name:"Mr. Rohan Jayasuriya",email:"rohan@example.com",subjects:["Biology","Science"],phone:"070-5556667",status:"Inactive",commission:50}]),N=c(!1),v=c(null),y=c([{id:101,tutorId:1,tutorName:"Mr. Sarath Mel",totalClasses:12,totalStudents:45,totalCollected:15e4,commissionRate:60,payableAmount:9e4,status:"Pending"},{id:102,tutorId:2,tutorName:"Ms. Deepika Gunawardena",totalClasses:8,totalStudents:30,totalCollected:8e4,commissionRate:70,payableAmount:56e3,status:"Paid"},{id:103,tutorId:3,tutorName:"Mr. Rohan Jayasuriya",totalClasses:0,totalStudents:0,totalCollected:0,commissionRate:50,payableAmount:0,status:"Paid"}]),F=[{name:"tutorName",label:"Tutor",field:"tutorName",align:"left",sortable:!0},{name:"totalClasses",label:"Classes Taught",field:"totalClasses",align:"center"},{label:`Fees Collected (${m.currency})`,field:"totalCollected",format:s=>m.format(s),align:"right"},{name:"commissionRate",label:"Rate",field:s=>s.commissionRate+"%",align:"center"},{name:"payableAmount",label:`Net Payable (${m.currency})`,field:"payableAmount",format:s=>m.format(s),align:"right",style:"font-weight: bold; color: var(--q-primary)"},{name:"status",label:"Status",field:"status",align:"center"},{name:"actions",label:"Actions",field:"actions",align:"right"}],I=c([{id:1,date:"2026-01-28",tutor:"Ms. Deepika Gunawardena",amount:52e3,status:"Completed"},{id:2,date:"2026-01-25",tutor:"Mr. Sarath Mel",amount:88500,status:"Completed"}]),H=[{name:"date",label:"Date",field:"date",align:"left"},{name:"tutor",label:"Tutor",field:"tutor",align:"left"},{name:"amount",label:"Amount",field:"amount",align:"right",format:s=>m.format(s)},{name:"status",label:"Status",field:"status",align:"right"}],J=T(()=>f.value.filter(s=>s.status==="Active").length),G=T(()=>y.value.filter(s=>s.status==="Pending").reduce((s,l)=>s+l.payableAmount,0)),L=T(()=>y.value.filter(s=>s.status==="Paid").reduce((s,l)=>s+l.payableAmount,0)),W=T(()=>[...y.value].sort((l,t)=>t.totalCollected-l.totalCollected)[0]||{}),X=s=>{v.value=s,N.value=!0},Y=()=>{if(v.value){const s=y.value.findIndex(l=>l.id===v.value.id);s!==-1&&(y.value[s].status="Paid",I.value.unshift({id:Date.now(),date:new Date().toISOString().split("T")[0],tutor:v.value.tutorName,amount:v.value.payableAmount,status:"Completed"}),C.notify({type:"positive",message:`Payment of ${m.format(v.value.payableAmount)} recorded!`}))}},K=()=>{i.value={status:"Active",subjects:[],commission:60},q.value=!1,Q.value=!0},Z=s=>{i.value=JSON.parse(JSON.stringify(s)),q.value=!0,Q.value=!0},ee=()=>{if(q.value){const s=f.value.findIndex(l=>l.id===i.value.id);s!==-1&&(f.value[s]={...i.value},C.notify({type:"positive",message:"Tutor details updated successfully"}))}else{const s=Math.max(0,...f.value.map(l=>l.id))+1;f.value.push({id:s,...i.value}),C.notify({type:"positive",message:"New tutor added successfully"})}},te=s=>{C.dialog({title:"Confirm Deletion",message:"Are you sure you want to remove this tutor?",cancel:!0,persistent:!0,ok:{label:"Delete",color:"negative",flat:!0}}).onOk(()=>{f.value=f.value.filter(l=>l.id!==s),C.notify({type:"positive",message:"Tutor removed successfully",icon:"delete"})})};return(s,l)=>(n(),g(me,{class:"q-pa-lg"},{default:a(()=>[o("div",ve,[l[10]||(l[10]=o("div",null,[o("h1",{class:"text-h5 text-weight-bold q-my-none"},"Tutor Management"),o("p",{class:"text-grey-5 q-mt-xs q-mb-none"}," Manage tutors, track performance, and handle commission payments. ")],-1)),P.value==="tutors"?(n(),R("div",ge,[e(b,{unelevated:"",icon:"add",color:"primary",label:"New Tutor","no-caps":"",onClick:K})])):ae("",!0)]),e(u,{class:"no-shadow border-gray q-mb-lg"},{default:a(()=>[e(ie,{modelValue:P.value,"onUpdate:modelValue":l[0]||(l[0]=t=>P.value=t),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"left","narrow-indicator":""},{default:a(()=>[e(M,{name:"overview",label:"Dashboard & Overview"}),e(M,{name:"payments",label:"Commission Payments"}),e(M,{name:"tutors",label:"All Tutors"})]),_:1},8,["modelValue"])]),_:1}),e(re,{modelValue:P.value,"onUpdate:modelValue":l[1]||(l[1]=t=>P.value=t),animated:"",class:"bg-transparent"},{default:a(()=>[e(D,{name:"overview",class:"q-pa-none"},{default:a(()=>[o("div",be,[o("div",ye,[e(u,{class:"no-shadow border-gray q-pa-md bg-white"},{default:a(()=>[o("div",we,[o("div",null,[l[11]||(l[11]=o("div",{class:"text-caption text-grey-6 text-uppercase text-weight-bold"}," Active Tutors ",-1)),o("div",xe,r(J.value),1)]),e(w,{color:"blue-1","text-color":"blue-8",icon:"school"})])]),_:1})]),o("div",he,[e(u,{class:"no-shadow border-gray q-pa-md bg-white"},{default:a(()=>[o("div",_e,[o("div",null,[l[12]||(l[12]=o("div",{class:"text-caption text-grey-6 text-uppercase text-weight-bold"}," Pending Payouts ",-1)),o("div",Ce,r(S(m).format(G.value)),1)]),e(w,{color:"orange-1","text-color":"orange-8",icon:"payments"})])]),_:1})]),o("div",Pe,[e(u,{class:"no-shadow border-gray q-pa-md bg-white"},{default:a(()=>[o("div",qe,[o("div",null,[l[13]||(l[13]=o("div",{class:"text-caption text-grey-6 text-uppercase text-weight-bold"}," Paid This Month ",-1)),o("div",Ve,r(S(m).format(L.value)),1)]),e(w,{color:"green-1","text-color":"green-8",icon:"check_circle"})])]),_:1})]),o("div",ke,[e(u,{class:"no-shadow border-gray q-pa-md bg-white"},{default:a(()=>[o("div",Qe,[o("div",null,[l[14]||(l[14]=o("div",{class:"text-caption text-grey-6 text-uppercase text-weight-bold"}," Top Performer ",-1)),o("div",Ae,r(W.value.tutorName||"N/A"),1)]),e(w,{color:"purple-1","text-color":"purple-8",icon:"star"})])]),_:1})])]),o("div",Te,[o("div",Ne,[e(u,{class:"no-shadow border-gray"},{default:a(()=>[e(x,null,{default:a(()=>[...l[15]||(l[15]=[o("div",{class:"text-h6"},"Recent Payout History",-1)])]),_:1}),e(j,{rows:I.value,columns:H,"row-key":"id",flat:"","hide-bottom":""},{"body-cell-status":a(t=>[e(p,{props:t},{default:a(()=>[e(ne,{color:t.row.status==="Completed"?"green-1":"orange-1","text-color":t.row.status==="Completed"?"green-9":"orange-9",dense:"",class:"text-weight-bold"},{default:a(()=>[d(r(t.row.status),1)]),_:2},1032,["color","text-color"])]),_:2},1032,["props"])]),_:1},8,["rows"])]),_:1})])])]),_:1}),e(D,{name:"payments",class:"q-pa-none"},{default:a(()=>[e(u,{class:"no-shadow border-gray"},{default:a(()=>[e(x,{class:"q-pb-none"},{default:a(()=>[...l[16]||(l[16]=[o("div",{class:"row items-center justify-between"},[o("div",{class:"text-h6"},"Calculate & Process Commissions"),o("div",{class:"text-subtitle2 text-grey-6"},"Current Month: February 2026")],-1)])]),_:1}),e(j,{rows:y.value,columns:F,"row-key":"id",flat:"",pagination:{rowsPerPage:10},class:"q-mt-md"},{"body-cell-tutorName":a(t=>[e(p,{props:t},{default:a(()=>[o("div",Se,[e(w,{size:"32px",class:"q-mr-sm",color:"grey-2","text-color":"primary"},{default:a(()=>[d(r(t.row.tutorName.charAt(0)),1)]),_:2},1024),o("div",Me,r(t.row.tutorName),1)])]),_:2},1032,["props"])]),"body-cell-status":a(t=>[e(p,{props:t},{default:a(()=>[t.row.status==="Paid"?(n(),g(k,{key:0,color:"green-1","text-color":"green-9",label:"Paid",class:"q-pa-xs text-weight-bold"})):(n(),g(k,{key:1,color:"orange-1","text-color":"orange-9",label:"Pending",class:"q-pa-xs text-weight-bold"}))]),_:2},1032,["props"])]),"body-cell-actions":a(t=>[e(p,{props:t,align:"right"},{default:a(()=>[t.row.status==="Pending"?(n(),g(b,{key:0,unelevated:"",size:"sm",color:"primary",label:"Pay Now",onClick:V=>X(t.row)},null,8,["onClick"])):(n(),g(b,{key:1,flat:"",size:"sm",color:"grey",label:"View Receipt",dense:""}))]),_:2},1032,["props"])]),_:1},8,["rows"])]),_:1})]),_:1}),e(D,{name:"tutors",class:"q-pa-none"},{default:a(()=>[e(u,{class:"no-shadow border-gray"},{default:a(()=>[e(j,{rows:f.value,columns:O,"row-key":"id",flat:"",pagination:{rowsPerPage:10}},{"body-cell-name":a(t=>[e(p,{props:t},{default:a(()=>[o("div",De,[e(w,{size:"32px",class:"q-mr-sm",color:"purple-1","text-color":"purple"},{default:a(()=>[d(r(t.row.name.charAt(0)),1)]),_:2},1024),o("div",null,[o("div",je,r(t.row.name),1),o("div",Ie,r(t.row.email),1)])])]),_:2},1032,["props"])]),"body-cell-subjects":a(t=>[e(p,{props:t},{default:a(()=>[o("div",Re,[(n(!0),R(oe,null,se(t.row.subjects,V=>(n(),g(k,{key:V,color:"grey-2","text-color":"grey-9",class:"q-px-sm"},{default:a(()=>[d(r(V),1)]),_:2},1024))),128))])]),_:2},1032,["props"])]),"body-cell-commission":a(t=>[e(p,{props:t},{default:a(()=>[e(k,{color:"blue-1","text-color":"blue-9",class:"text-weight-bold"},{default:a(()=>[d(r(t.row.commission)+"% ",1)]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-status":a(t=>[e(p,{props:t},{default:a(()=>[e(k,{color:t.row.status==="Active"?"green-2":"red-2","text-color":t.row.status==="Active"?"green-9":"red-9",class:"q-px-sm q-py-xs text-weight-bold"},{default:a(()=>[d(r(t.row.status),1)]),_:2},1032,["color","text-color"])]),_:2},1032,["props"])]),"body-cell-actions":a(t=>[e(p,{props:t,"auto-width":""},{default:a(()=>[e(b,{flat:"",round:"",dense:"",icon:"more_vert",color:"grey-5"},{default:a(()=>[e(de,null,{default:a(()=>[e(ue,{style:{"min-width":"100px"}},{default:a(()=>[h((n(),g($,{clickable:"",onClick:V=>Z(t.row)},{default:a(()=>[e(E,null,{default:a(()=>[...l[17]||(l[17]=[d("Edit Details",-1)])]),_:1})]),_:1},8,["onClick"])),[[_]]),e(le),h((n(),g($,{clickable:"",class:"text-red",onClick:V=>te(t.row.id)},{default:a(()=>[e(E,null,{default:a(()=>[...l[18]||(l[18]=[d("Delete",-1)])]),_:1})]),_:1},8,["onClick"])),[[_]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(U,{modelValue:Q.value,"onUpdate:modelValue":l[8]||(l[8]=t=>Q.value=t)},{default:a(()=>[e(u,{style:{"min-width":"400px"}},{default:a(()=>[e(x,null,{default:a(()=>[o("div",Ue,r(q.value?"Edit Tutor Details":"Add New Tutor"),1)]),_:1}),e(x,{class:"q-pt-none q-gutter-y-md"},{default:a(()=>[e(A,{outlined:"",modelValue:i.value.name,"onUpdate:modelValue":l[2]||(l[2]=t=>i.value.name=t),label:"Tutor Name",dense:""},null,8,["modelValue"]),e(A,{outlined:"",modelValue:i.value.email,"onUpdate:modelValue":l[3]||(l[3]=t=>i.value.email=t),label:"Email Address",dense:""},null,8,["modelValue"]),e(A,{outlined:"",modelValue:i.value.phone,"onUpdate:modelValue":l[4]||(l[4]=t=>i.value.phone=t),label:"Phone Number",mask:"###-#######",dense:""},null,8,["modelValue"]),e(z,{outlined:"",modelValue:i.value.subjects,"onUpdate:modelValue":l[5]||(l[5]=t=>i.value.subjects=t),options:["Mathematics","Physics","Chemistry","Biology","English","History","ICT"],label:"Subjects",multiple:"","use-chips":"",dense:""},null,8,["modelValue"]),o("div",Be,[o("div",$e,[e(A,{outlined:"",modelValue:i.value.commission,"onUpdate:modelValue":l[6]||(l[6]=t=>i.value.commission=t),modelModifiers:{number:!0},label:"Commission (%)",type:"number",dense:"",hint:"Percentage of class fees"},null,8,["modelValue"])]),o("div",Ee,[e(z,{outlined:"",modelValue:i.value.status,"onUpdate:modelValue":l[7]||(l[7]=t=>i.value.status=t),options:["Active","Inactive"],label:"Status",dense:""},null,8,["modelValue"])])])]),_:1}),e(B,{align:"right",class:"text-primary q-pa-md"},{default:a(()=>[h(e(b,{flat:"",label:"Cancel",color:"grey"},null,512),[[_]]),h(e(b,{unelevated:"",label:q.value?"Save Changes":"Add Tutor",color:"primary",onClick:ee},null,8,["label"]),[[_]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(U,{modelValue:N.value,"onUpdate:modelValue":l[9]||(l[9]=t=>N.value=t)},{default:a(()=>[e(u,{style:{"min-width":"350px"}},{default:a(()=>[e(x,null,{default:a(()=>[...l[19]||(l[19]=[o("div",{class:"text-h6"},"Confirm Payout",-1)])]),_:1}),e(x,{class:"q-pt-none"},{default:a(()=>[l[20]||(l[20]=d(" Are you sure you want to process a payment of ",-1)),o("span",ze,r(S(m).format(v.value?.payableAmount)),1),d(" to "+r(v.value?.tutorName)+"? ",1)]),_:1}),e(B,{align:"right"},{default:a(()=>[h(e(b,{flat:"",label:"Cancel",color:"grey"},null,512),[[_]]),h(e(b,{label:"Confirm Pay",color:"primary",unelevated:"",onClick:Y},null,512),[[_]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},pt=fe(Oe,[["__scopeId","data-v-da53b4b8"]]);export{pt as default};
