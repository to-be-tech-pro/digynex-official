import{u as h,l as P,m as k,n as q,p as l,f as o,Q as v,q as a,P as y,N as i,v as w,O as Q,r}from"./index-BCoBQOFT.js";import{Q as V}from"./QForm-BO46eSKG.js";import{Q as C}from"./QPage-DNQfSVvF.js";import{Q as R,a as _}from"./QLayout-iHn7fAIC.js";import{u as T}from"./use-quasar-DuPF83ky.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./QScrollObserver-B5hpTMde.js";import"./QResizeObserver-CLJoVRmi.js";const z={class:"content-container z-top q-pa-md",style:{"max-width":"450px",width:"100%"}},A={class:"glass-panel q-pa-lg q-pa-md-xl rounded-xl shadow-24 border-glass text-center relative-position"},N={class:"q-mt-xl text-grey-5"},$={__name:"RegisterPage",setup(B){const n=T(),u=h(),c=r(""),d=r(""),f=r(""),p=r(!1),m=r(!1),g=r(!1),x=async()=>{g.value=!0;try{const{data:s,error:e}=await Q.auth.signUp({email:c.value,password:d.value});if(e)throw e;if(s?.user?.identities?.length===0){n.notify({type:"warning",message:"This email is already registered. Please log in instead.",position:"top",timeout:4e3}),setTimeout(()=>{u.push("/login")},2e3);return}s.session?(n.notify({type:"positive",message:"Account created successfully! Redirecting...",position:"top",timeout:2e3}),setTimeout(()=>{u.push("/tms/portal/dashboard")},1e3)):(n.notify({type:"positive",message:"Registration successful! Please check your email to verify your account.",caption:"Redirecting to login...",position:"top",timeout:5e3,actions:[{label:"Login",color:"white",handler:()=>u.push("/login")}]}),setTimeout(()=>{u.push("/login")},4e3))}catch(s){console.error("Registration Error:",s);let e="Error registering. Please try again.";s.message.includes("User already registered")||s.message.includes("already registered")?e="Account already exists! Please log in.":s.message&&(e=s.message),n.notify({type:"negative",message:e,position:"top",timeout:4e3})}finally{g.value=!1}};return(s,e)=>{const b=P("router-link");return k(),q(_,{view:"hHh lpR fFf"},{default:l(()=>[o(R,null,{default:l(()=>[o(C,{class:"bg-dark text-white flex flex-center relative-position overflow-hidden"},{default:l(()=>[o(v,{to:"/",icon:"arrow_back",label:"Home",flat:"","no-caps":"",class:"absolute-top-left q-ma-md z-top text-grey-5 hover-accent"}),e[11]||(e[11]=a("div",{class:"glow-blob top-right"},null,-1)),e[12]||(e[12]=a("div",{class:"glow-blob bottom-left"},null,-1)),a("div",z,[a("div",A,[a("div",{class:"q-mb-xl cursor-pointer",onClick:e[0]||(e[0]=t=>s.$router.push("/"))},[...e[6]||(e[6]=[a("div",{class:"text-h4 text-white text-weight-bold",style:{"letter-spacing":"-1px"}}," DigyNex ",-1),a("div",{class:"text-caption text-grey-5 q-mt-xs"},"Tuition Management System",-1)])]),e[9]||(e[9]=a("h2",{class:"text-h5 text-weight-bold q-mb-md"},"Create Account",-1)),e[10]||(e[10]=a("p",{class:"text-grey-5 q-mb-xl"},"Join the open source education revolution",-1)),o(V,{onSubmit:x,class:"q-gutter-y-md"},{default:l(()=>[o(y,{modelValue:c.value,"onUpdate:modelValue":e[1]||(e[1]=t=>c.value=t),dark:"",outlined:"",label:"Email Address",color:"accent",type:"email","lazy-rules":"",rules:[t=>t&&t.length>0||"Please enter your email"]},{prepend:l(()=>[o(i,{name:"email",color:"grey-5"})]),_:1},8,["modelValue","rules"]),o(y,{modelValue:d.value,"onUpdate:modelValue":e[3]||(e[3]=t=>d.value=t),dark:"",outlined:"",label:"Password",color:"accent",type:p.value?"text":"password","lazy-rules":"",rules:[t=>t&&t.length>0||"Please enter your password",t=>t.length>=6||"Password must be at least 6 characters"]},{prepend:l(()=>[o(i,{name:"lock",color:"grey-5"})]),append:l(()=>[o(i,{name:p.value?"visibility":"visibility_off",class:"cursor-pointer",color:"grey-5",onClick:e[2]||(e[2]=t=>p.value=!p.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),o(y,{modelValue:f.value,"onUpdate:modelValue":e[5]||(e[5]=t=>f.value=t),dark:"",outlined:"",label:"Confirm Password",color:"accent",type:m.value?"text":"password","lazy-rules":"",rules:[t=>t&&t.length>0||"Please confirm your password",t=>t===d.value||"Passwords do not match"]},{prepend:l(()=>[o(i,{name:"lock_clock",color:"grey-5"})]),append:l(()=>[o(i,{name:m.value?"visibility":"visibility_off",class:"cursor-pointer",color:"grey-5",onClick:e[4]||(e[4]=t=>m.value=!m.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),o(v,{unelevated:"",type:"submit",color:"white","text-color":"dark",label:"Sign Up",class:"full-width text-weight-bold q-py-sm btn-hover-lift",loading:g.value},null,8,["loading"])]),_:1}),a("div",N,[e[8]||(e[8]=w(" Already have an account? ",-1)),o(b,{to:"/login",class:"text-white text-weight-bold hover-accent text-decoration-none"},{default:l(()=>[...e[7]||(e[7]=[w("Sign In",-1)])]),_:1})])])])]),_:1})]),_:1})]),_:1})}}},M=U($,[["__scopeId","data-v-2cc67c3f"]]);export{M as default};
