import{u as F,o as W,O as N,l as K,m as o,n as u,p as s,f as t,Q as m,v as n,q as a,P as G,R as X,N as r,C as A,y as w,F as Q,B as C,D as c,z as p,S as _,U as Y,V as B,W as Z,X as J,Y as M,Z as tt,_ as et,r as g,c as T}from"./index-BCoBQOFT.js";import{Q as st}from"./QToolbarTitle-DloqS1VZ.js";import{Q as U}from"./QSpace-BMoCBDdG.js";import{Q as at}from"./QBadge-CD0MS9Rg.js";import{Q as v}from"./QItemLabel-djxoAbwS.js";import{Q as x,a as d}from"./QItem-Wb4A_Ad7.js";import{Q as S}from"./QList-TwHTGU55.js";import{Q as I}from"./QMenu-CRQWq3Fk.js";import{Q as lt}from"./QToolbar-D2GMqklU.js";import{Q as ot}from"./QHeader-BVGd1c8n.js";import{Q as it}from"./QDrawer-DrH908EQ.js";import{Q as nt,a as rt}from"./QLayout-iHn7fAIC.js";import{C as y}from"./ClosePopup-DoFqAVUY.js";import{u as dt}from"./use-quasar-DuPF83ky.js";import"./position-engine-BGz6yeZ8.js";import"./QResizeObserver-CLJoVRmi.js";import"./TouchPan-DDYz_H52.js";import"./touch-BjYP5sR0.js";import"./format-CoaQEihs.js";import"./QScrollObserver-B5hpTMde.js";const ut={class:"q-gutter-x-sm row items-center"},mt={key:0,class:"text-center q-pa-md text-grey"},pt={class:"text-left q-ml-sm gt-xs"},ct={class:"text-weight-bold text-subtitle2",style:{"line-height":"1.1"}},gt={class:"text-caption text-grey-6",style:{"line-height":"1","font-size":"11px"}},xt={class:"q-px-md q-py-sm"},ft={class:"text-weight-bold"},vt={class:"text-caption text-grey-6"},yt={class:"q-pa-lg q-mb-xs flex flex-center"},bt={class:"absolute-bottom bg-transparent q-pb-md"},ht={class:"row items-center no-wrap justify-between"},wt={class:"row items-center"},_t={class:"bg-secondary-opacity q-pa-xs rounded-borders q-mr-sm"},qt={class:"q-gutter-y-sm"},kt={class:"row items-center full-width"},Qt={class:"row items-center full-width"},Ct={class:"row items-center full-width"},Gt={__name:"TmsLayout",setup(St){dt().dark.set(!0);const b=g(!1),h=g(""),z=F(),f=g(""),V=g(""),q=g(!1),k=g([]),P=()=>{b.value=!b.value},L=()=>{h.value.trim()!==""&&z.push({path:"/tms/portal/students",query:{q:h.value}})},O=()=>{window.open("https://digynex.se","_blank")},j=[{title:"Dashboard",icon:"grid_view",link:"/tms/portal/dashboard"}],E=[{title:"Students",icon:"school",link:"/tms/portal/students"},{title:"Tutors",icon:"co_present",link:"/tms/portal/tutors"},{title:"Classes",icon:"class",link:"/tms/portal/classes"},{title:"Attendance",icon:"rule",link:"/tms/portal/attendance"},{title:"Payments",icon:"payments",link:"/tms/portal/payments"},{title:"Exams",icon:"assignment",link:"/tms/portal/exams"},{title:"Reports",icon:"bar_chart",link:"/tms/portal/reports"},{title:"Billing & Plan",icon:"credit_card",link:"/tms/portal/subscription"},{title:"System Users",icon:"manage_accounts",link:"/tms/portal/super-admin",superAdminOnly:!0}],D=T(()=>{const i=f.value?.toLowerCase()||"";return i==="amilawijayanthaperera@gmail.com"||i==="amilawijayanthaperera858@gmail.com"||i==="admin@digynex.com"||V.value==="74736fbf-0700-4a0d-b797-84d0b0b3b554"}),$=T(()=>E.filter(i=>i.superAdminOnly?D.value:!0));W(async()=>{const{data:{user:i}}=await N.auth.getUser();i&&(f.value=i.email,V.value=i.id)});const H=async()=>{await N.auth.signOut(),z.push("/login")};return(i,e)=>{const R=K("router-view");return o(),u(rt,{view:"lHh Lpr lFf",class:"bg-slate-50 font-inter"},{default:s(()=>[t(ot,{class:"bg-white text-primary shadow-1 q-py-xs","height-hint":"60"},{default:s(()=>[t(lt,null,{default:s(()=>[t(m,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:P,class:"q-mr-sm text-grey-7"}),t(st,{class:"text-weight-bold text-h6 text-gold-gradient row items-center"},{default:s(()=>[...e[5]||(e[5]=[n(" DigyNex ",-1),a("span",{class:"text-caption text-white bg-primary q-px-xs q-py-none q-ml-sm rounded-borders",style:{"font-size":"10px",padding:"2px 6px"}},"BETA",-1)])]),_:1}),t(U),a("div",ut,[t(G,{dense:"",outlined:"",rounded:"",modelValue:h.value,"onUpdate:modelValue":e[0]||(e[0]=l=>h.value=l),placeholder:"Global Search...",class:"gt-xs q-mr-md","bg-color":"grey-1",borderless:"","input-class":"text-dark",style:{"min-width":"250px"},onKeyup:X(L,["enter"])},{prepend:s(()=>[t(r,{name:"search",color:"grey-6",class:"cursor-pointer",onClick:L})]),_:1},8,["modelValue"]),t(m,{round:"",flat:"",color:"grey-7",icon:"notifications"},{default:s(()=>[k.value.length>0?(o(),u(at,{key:0,color:"red",floating:"",rounded:"",mini:""})):A("",!0),t(I,null,{default:s(()=>[t(S,{style:{"min-width":"250px"}},{default:s(()=>[t(v,{header:""},{default:s(()=>[...e[6]||(e[6]=[n("Notifications",-1)])]),_:1}),k.value.length===0?(o(),w("div",mt," No new notifications ")):A("",!0),(o(!0),w(Q,null,C(k.value,l=>c((o(),u(x,{key:l.id,clickable:""},{default:s(()=>[t(d,null,{default:s(()=>[t(v,null,{default:s(()=>[n(p(l.title),1)]),_:2},1024),t(v,{caption:""},{default:s(()=>[n(p(l.message),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[y]])),128))]),_:1})]),_:1})]),_:1}),t(m,{round:"",flat:"",color:"grey-7",icon:"settings",to:"/settings"}),t(_,{vertical:"",inset:"",class:"q-mx-sm bg-grey-3"}),t(m,{flat:"","no-caps":"",class:"q-ml-none rounded-borders text-dark pl-1"},{default:s(()=>[t(Y,{size:"36px"},{default:s(()=>[...e[7]||(e[7]=[a("img",{src:"https://cdn.quasar.dev/img/boy-avatar.png"},null,-1)])]),_:1}),a("div",pt,[a("div",ct,p(f.value.split("@")[0]||"User"),1),a("div",gt,p(D.value?"Super Admin":"Administrator"),1)]),t(I,{"transition-show":"jump-down","transition-hide":"jump-up",offset:[0,10],class:"bg-white border-light text-dark shadow-10"},{default:s(()=>[t(S,{style:{"min-width":"200px"}},{default:s(()=>[a("div",xt,[a("div",ft,p(f.value.split("@")[0]||"User"),1),a("div",vt,p(f.value||"Loading..."),1)]),t(_,{class:"bg-grey-2"}),c((o(),u(x,{clickable:"",to:"/profile",class:"text-grey-8"},{default:s(()=>[t(d,{avatar:""},{default:s(()=>[t(r,{name:"person_outline"})]),_:1}),t(d,null,{default:s(()=>[...e[8]||(e[8]=[n("My Profile",-1)])]),_:1})]),_:1})),[[y]]),c((o(),u(x,{clickable:"",to:"/settings",class:"text-grey-8"},{default:s(()=>[t(d,{avatar:""},{default:s(()=>[t(r,{name:"settings"})]),_:1}),t(d,null,{default:s(()=>[...e[9]||(e[9]=[n("Settings",-1)])]),_:1})]),_:1})),[[y]]),t(_,{class:"bg-grey-2"}),c((o(),u(x,{clickable:"",onClick:H,class:"text-red-7 hover:bg-red-50"},{default:s(()=>[t(d,{avatar:""},{default:s(()=>[t(r,{name:"logout",color:"red-7"})]),_:1}),t(d,null,{default:s(()=>[...e[10]||(e[10]=[n("Log Out",-1)])]),_:1})]),_:1})),[[y]])]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1}),t(it,{modelValue:b.value,"onUpdate:modelValue":e[3]||(e[3]=l=>b.value=l),"show-if-above":"",bordered:"",width:260},{default:s(()=>[a("div",yt,[a("div",{class:"row items-center cursor-pointer",onClick:e[1]||(e[1]=l=>i.$router.push("/tms/portal/dashboard"))},[...e[11]||(e[11]=[a("div",{class:"text-h5 text-weight-bolder text-gold-gradient tracking-tight font-heading"}," DigyNex ",-1)])])]),t(S,{padding:"",class:"text-slate-300"},{default:s(()=>[t(v,{header:"",class:"text-grey-5 text-uppercase text-weight-bold text-caption q-pl-lg q-mb-xs q-pt-sm",style:{"font-size":"0.7rem","letter-spacing":"1px"}},{default:s(()=>[...e[12]||(e[12]=[n(" Main Menu ",-1)])]),_:1}),(o(),w(Q,null,C(j,l=>c(t(x,{clickable:"",key:l.title,to:l.link,"active-class":"active-dark-link",class:"q-mx-md rounded-borders q-mb-sm transition-all text-slate-400"},{default:s(()=>[t(d,{avatar:"",style:{"min-width":"40px"}},{default:s(()=>[t(r,{name:l.icon,size:"22px"},null,8,["name"])]),_:2},1024),t(d,{class:"text-weight-medium text-body2"},{default:s(()=>[n(p(l.title),1)]),_:2},1024)]),_:2},1032,["to"]),[[B]])),64)),t(_,{spaced:"lg",class:"q-mx-lg bg-grey-8 opacity-20"}),t(v,{header:"",class:"text-grey-5 text-uppercase text-weight-bold text-caption q-pl-lg q-mb-xs",style:{"font-size":"0.7rem","letter-spacing":"1px"}},{default:s(()=>[...e[13]||(e[13]=[n(" Management ",-1)])]),_:1}),(o(!0),w(Q,null,C($.value,l=>c((o(),u(x,{clickable:"",key:l.title,to:l.link,"active-class":"active-dark-link",class:"q-mx-md rounded-borders q-mb-sm transition-all text-slate-400"},{default:s(()=>[t(d,{avatar:"",style:{"min-width":"40px"}},{default:s(()=>[t(r,{name:l.icon,size:"22px"},null,8,["name"])]),_:2},1024),t(d,{class:"text-weight-medium text-body2"},{default:s(()=>[n(p(l.title),1)]),_:2},1024)]),_:2},1032,["to"])),[[B]])),128)),e[16]||(e[16]=a("div",{class:"q-pb-xl"},null,-1)),e[17]||(e[17]=a("div",{class:"q-pb-lg"},null,-1)),a("div",bt,[a("div",{class:"q-mx-md q-mb-md glass-box rounded-borders q-pa-sm cursor-pointer hover-scale transition-all",onClick:e[2]||(e[2]=l=>q.value=!0)},[a("div",ht,[a("div",wt,[a("div",_t,[t(r,{name:"headset_mic",color:"secondary",size:"20px"})]),e[14]||(e[14]=a("div",null,[a("div",{class:"text-caption text-weight-bold text-white",style:{"font-size":"13px"}}," Need Help? "),a("div",{class:"text-caption text-grey-5",style:{"font-size":"10px"}}," Contact Support ")],-1))]),t(r,{name:"chevron_right",color:"grey-6",size:"18px"})])]),a("div",{class:"text-center cursor-pointer q-mt-sm",onClick:O},[...e[15]||(e[15]=[a("div",{class:"text-caption text-grey-7 q-mb-xs",style:{"font-size":"9px","letter-spacing":"0.5px"}}," Powered by ",-1),a("div",{class:"text-h6 text-weight-bolder text-gold-gradient font-heading"},"DigyNex",-1)])])])]),_:1}),e[18]||(e[18]=a("div",{style:{height:"180px"}},null,-1))]),_:1},8,["modelValue"]),t(Z,{modelValue:q.value,"onUpdate:modelValue":e[4]||(e[4]=l=>q.value=l)},{default:s(()=>[t(J,{style:{"min-width":"350px"},class:"bg-white rounded-borders"},{default:s(()=>[t(M,{class:"row items-center q-pb-none"},{default:s(()=>[e[19]||(e[19]=a("div",{class:"text-h6 text-weight-bold text-primary"},"Contact Support",-1)),t(U),c(t(m,{icon:"close",flat:"",round:"",dense:"",class:"text-grey"},null,512),[[y]])]),_:1}),t(M,{class:"q-pt-md"},{default:s(()=>[e[23]||(e[23]=a("p",{class:"text-grey-7 text-body2 q-mb-md"}," Have a question or need assistance? Choose an option below. ",-1)),a("div",qt,[t(m,{outline:"",color:"primary",class:"full-width text-left","no-caps":"",align:"left",href:"mailto:support@digynex.se",target:"_blank"},{default:s(()=>[a("div",kt,[t(r,{name:"email",class:"q-mr-md",size:"sm"}),e[20]||(e[20]=a("div",null,[a("div",{class:"text-weight-bold"},"Email Support"),a("div",{class:"text-caption text-grey-6"},"response within 24h")],-1))])]),_:1}),t(m,{outline:"",color:"green-7",class:"full-width text-left","no-caps":"",align:"left",href:"https://wa.me/",target:"_blank"},{default:s(()=>[a("div",Qt,[t(r,{name:"chat",class:"q-mr-md",size:"sm"}),e[21]||(e[21]=a("div",null,[a("div",{class:"text-weight-bold"},"WhatsApp Chat"),a("div",{class:"text-caption text-grey-6"},"Instant support")],-1))])]),_:1}),t(m,{unelevated:"",class:"full-width text-left bg-gold-gradient text-white","no-caps":"",align:"left",href:"https://digynex.se",target:"_blank"},{default:s(()=>[a("div",Ct,[t(r,{name:"language",class:"q-mr-md",size:"sm"}),e[22]||(e[22]=a("div",null,[a("div",{class:"text-weight-bold"},"Visit Website"),a("div",{class:"text-caption text-white-opacity"},"digynex.se")],-1))])]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(nt,{class:"bg-slate-50",style:{"min-height":"100vh"}},{default:s(()=>[t(R,null,{default:s(({Component:l})=>[t(tt,{name:"fade",mode:"out-in"},{default:s(()=>[(o(),u(et(l)))]),_:2},1024)]),_:1})]),_:1})]),_:1})}}};export{Gt as default};
